# Новинки и планы издательств, авторов

API в точности повторяет раздел https://fantlab.ru/pubnews

Веб-версия строится ровно по тем же данным, что и выводятся в АПИ.

В разделе АПИ три подраздела:
```
/pubnews.json   - Новинки издательств
/pubplans.json  - Планы издательств
/autplans.json  - Планы авторов
```

Первые два - списки изданий. Третьей - список произведений.

В урле запроса допустимы параметры: lang, sort, page, pub_id.

lang - язык.
```
lang=0  - русскоязычное
lang=1  - зарубежное
lang=2  - и то, и другое
```

sort - сортировка. В каждом из трёх подразделов свой набор доступных сортировок:
```
/pubnews.json
  date - по дате (выхода)
  type - по типу (издания)
  pub - по издательству и серии
  author - по автору
  title - по наименованию
/pubplans.json  - Планы издательств
  corect - по изменению (дате последней правки издания)   - единственное отличие от набора сортировок /pubnews.json
  date - по дате (выхода)
  type - по типу (издания)
  pub - по издательству и серии
  author - по автору
  title - по наименованию
/autplans.json  - Планы авторов
  corect - по изменению (дате добавления произведения)
  author - по автору
  title - по наименованию
```

pub_id - выбор конкретного издательства по его ID.
Доступно только в разделах pubnews и pubplans.

page - страница.


# выдача

all_pages_access_to_user_class  - номер класса посетителя, начиная с которого (включительно) можно открывать ему page=all.
Это небольшая защита от излишней нагрузки на сервер, а также от пауков-парсеров, которым удобнее одну страницу парсить.

has_news_plans - хэш из шести значений. Каждое или null или 1. Единица означает, что в этом разделе есть новые объекты (ворки или эдишны), которых юзер ещё не видел. Цифра в названии - это lang.
Например, pubplans1_new=1 означает, что в Планах издательств (зарубежных) есть что-то новое.

